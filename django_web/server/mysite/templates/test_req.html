<!DOCTYPE html>
<head lang="en">
    <meta charset="utf-8">
    <title> Test Request </title>
    <script src="/static/js/jquery-1.11.3/jquery.min.js"></script>
</head>
<body>
  <div id = 'Test Communication'>
      <h1> Hello {{name}} </h1>
	  <h2> Hello {{user.name}} </h2>
  </div>
  <ul>
    {% for user_name in users%}
      <li> {{user_name}} </li>
    {% endfor %}
  </ul>
  <input type="button" id="Set_ENV_KEY" value="Set ENV_KEY">
  <p id="Set_ENV_KEY_Rsp"></p>
  <input type="button" id="Request_Task_Rpc" value="Request Task Rpc">
  <p id="Request_Task_Rpc_Rsp"></p>
  <input type="button" id="Request_Task_Ntf" value="Request_Task_Ntf">
  <p id="Request_Task_Ntf_Rsp"></p>
  <input type="button" id="Request_All_SrvStatus" value="Request All SrvStatus">
  <p id="Request_All_SrvStatus_Rsp"></p>
  <input type="button" id="Request_All_TaskList" value="Request All TaskList">
  <p id="Request_All_TaskList_Rsp"></p>
  <input type="button" id="Request_All_TaskResult" value="Request All TaskResult">
  <p id="Request_All_TaskResult_Rsp"></p>
  <input type="button" id="Request_All_Version" value="Request All Version">
  <p id="Request_All_Version_Rsp"></p>
  <a href="/index.html/"> SubHtml </a>
	<script>
      $('#Set_ENV_KEY').click(function(){
        var ENV_KEY = 'PTEST_170'
        $.ajax({
          url: '/AJAX/Set_ENV_KEY/',
          data: {'env_key_value': ENV_KEY},
          dataType: 'json',
          type: 'POST',
          traditional: true,
          success: function (responseJSON) {
              console.log (responseJSON)
          }
        });
      });

      $('#Request_Task_Rpc').click(function(){
        req_data = {
          'type': 'version_control',
          '--cmd': 'publish',
          '--args':'xml:2.3.114',
          '--grp': '',
          '--ctr': '',
          '--srv': '',
          '--srvno': '',
          '--ictr': '',
          '--isrv': '',
          '--isrvno': '',
        }
        $.ajax({
          url: '/AJAX/Request_Task_Rpc/',
          data: {'req_json': JSON.stringify(req_data)},
          dataType: 'json',
          type: 'POST',
          traditional: true,
          success: function (responseJSON) {
              console.log (responseJSON)
          }
        });
      })
      $('#Request_Task_Ntf').click(function(){
          $.getJSON('/AJAX/Request_Task_Ntf/',function(rsp_result){
              console.log (rsp_result)
              // $('#Request_All_TaskList_Rsp').append(rsp_result.twz + '<br>');
          })
      })
      $('#Request_All_SrvStatus').click(function(){
          $.getJSON('/AJAX/Request_All_SrvStatus/',function(rsp_result){
              console.log (rsp_result)
              // $('#Request_All_TaskList_Rsp').append(rsp_result.twz + '<br>');
          })
      })
      $('#Request_All_TaskList').click(function(){
          $.getJSON('/AJAX/Request_All_TaskList/',function(rsp_result){
              console.log (rsp_result)
              // $('#Request_All_TaskList_Rsp').append(rsp_result.twz + '<br>');
          })
      })
      $('#Request_All_TaskResult').click(function(){
          $.getJSON('/AJAX/Request_All_TaskResult/',function(rsp_result){
              console.log (rsp_result)
              // $('#Request_All_TaskResult_Rsp').append(rsp_result.twz + '<br>');
          })
      })
      $('#Request_All_Version').click(function(){
          $.getJSON('/AJAX/Request_All_Version/',function(rsp_result){
              console.log (rsp_result)
              // $('#Request_All_Version_Rsp').append(rsp_result.twz + '<br>');
          })
      })
	</script>

</body>
